#include <stdio.h>
#include <string.h>

// 서울 주요 지역 구조체
typedef struct {
    char name[30];
    int id;
} Location;

int main() {
    // 서울 주요 지역 25개 자치구
    Location locations[] = {
        {"종로구", 0}, {"중구", 1}, {"용산구", 2}, {"성동구", 3},
        {"광진구", 4}, {"동대문구", 5}, {"중랑구", 6}, {"성북구", 7},
        {"강북구", 8}, {"도봉구", 9}, {"노원구", 10}, {"은평구", 11},
        {"서대문구", 12}, {"마포구", 13}, {"양천구", 14}, {"강서구", 15},
        {"구로구", 16}, {"금천구", 17}, {"영등포구", 18}, {"동작구", 19},
        {"관악구", 20}, {"서초구", 21}, {"강남구", 22}, {"송파구", 23},
        {"강동구", 24}
    };
    
    // 실제 도로 거리를 반영한 거리 행렬 (단위: km)
    float distance[25][25] = {
        {0, 3.5, 6.2, 8.1, 10.5, 5.8, 9.2, 4.5, 7.8, 11.2, 13.5, 8.5, 5.2, 7.8, 13.5, 18.2, 16.5, 19.8, 12.5, 10.8, 13.2, 9.5, 11.8, 15.2, 17.5},
        {3.5, 0, 4.8, 6.5, 9.2, 4.5, 8.5, 6.2, 9.5, 12.8, 15.2, 10.2, 6.8, 8.5, 14.2, 19.5, 17.2, 20.5, 11.8, 9.5, 12.8, 8.2, 10.5, 13.8, 16.2},
        {6.2, 4.8, 0, 5.2, 8.5, 7.8, 11.2, 8.5, 12.2, 15.5, 17.8, 11.5, 7.2, 5.8, 11.5, 16.8, 14.5, 17.8, 8.5, 6.2, 9.5, 5.8, 8.2, 11.5, 13.8},
        {8.1, 6.5, 5.2, 0, 3.5, 4.2, 6.8, 6.5, 10.2, 13.5, 15.8, 12.8, 9.5, 8.2, 13.8, 19.2, 16.8, 20.2, 11.5, 9.2, 12.5, 8.8, 8.5, 9.2, 11.5},
        {10.5, 9.2, 8.5, 3.5, 0, 6.8, 5.2, 9.8, 13.5, 16.8, 14.2, 15.2, 12.8, 11.5, 16.5, 21.8, 19.5, 22.8, 14.8, 12.5, 15.8, 11.2, 9.5, 7.8, 8.2},
        {5.8, 4.5, 7.8, 4.2, 6.8, 0, 5.5, 3.2, 6.5, 9.8, 11.2, 8.8, 7.5, 9.8, 15.5, 20.8, 18.5, 21.8, 14.5, 12.2, 15.5, 11.8, 12.5, 13.8, 16.2},
        {9.2, 8.5, 11.2, 6.8, 5.2, 5.5, 0, 7.8, 8.5, 8.2, 9.5, 12.5, 11.8, 13.5, 18.8, 24.2, 21.8, 25.2, 18.2, 15.8, 19.2, 15.5, 15.2, 12.5, 10.8},
        {4.5, 6.2, 8.5, 6.5, 9.8, 3.2, 7.8, 0, 4.2, 7.5, 9.8, 6.5, 4.8, 7.2, 13.2, 18.5, 16.2, 19.5, 12.8, 10.5, 13.8, 10.2, 12.5, 15.8, 18.2},
        {7.8, 9.5, 12.2, 10.2, 13.5, 6.5, 8.5, 4.2, 0, 4.5, 7.2, 5.8, 8.5, 10.8, 16.8, 22.2, 19.8, 23.2, 16.5, 14.2, 17.5, 14.8, 16.5, 19.8, 22.2},
        {11.2, 12.8, 15.5, 13.5, 16.8, 9.8, 8.2, 7.5, 4.5, 0, 5.5, 8.2, 11.8, 14.2, 20.2, 25.5, 23.2, 26.5, 19.8, 17.5, 20.8, 18.2, 19.8, 23.2, 25.5},
        {13.5, 15.2, 17.8, 15.8, 14.2, 11.2, 9.5, 9.8, 7.2, 5.5, 0, 11.5, 14.2, 16.5, 22.5, 27.8, 25.5, 28.8, 22.2, 19.8, 23.2, 20.5, 19.2, 18.5, 20.8},
        {8.5, 10.2, 11.5, 12.8, 15.2, 8.8, 12.5, 6.5, 5.8, 8.2, 11.5, 0, 4.5, 6.8, 12.8, 18.2, 15.8, 19.2, 13.5, 11.2, 14.5, 12.8, 14.5, 17.8, 20.2},
        {5.2, 6.8, 7.2, 9.5, 12.8, 7.5, 11.8, 4.8, 8.5, 11.8, 14.2, 4.5, 0, 3.5, 9.5, 14.8, 12.5, 15.8, 9.8, 7.5, 10.8, 8.5, 10.8, 14.2, 16.5},
        {7.8, 8.5, 5.8, 8.2, 11.5, 9.8, 13.5, 7.2, 10.8, 14.2, 16.5, 6.8, 3.5, 0, 6.5, 11.8, 9.5, 12.8, 6.8, 4.5, 7.8, 5.2, 7.5, 10.8, 13.2},
        {13.5, 14.2, 11.5, 13.8, 16.5, 15.5, 18.8, 13.2, 16.8, 20.2, 22.5, 12.8, 9.5, 6.5, 0, 5.5, 4.2, 7.5, 3.8, 6.8, 8.5, 8.2, 10.5, 13.8, 16.2},
        {18.2, 19.5, 16.8, 19.2, 21.8, 20.8, 24.2, 18.5, 22.2, 25.5, 27.8, 18.2, 14.8, 11.8, 5.5, 0, 6.8, 10.2, 8.5, 11.5, 13.2, 13.5, 15.8, 19.2, 21.5},
        {16.5, 17.2, 14.5, 16.8, 19.5, 18.5, 21.8, 16.2, 19.8, 23.2, 25.5, 15.8, 12.5, 9.5, 4.2, 6.8, 0, 3.5, 5.2, 7.8, 6.5, 9.8, 12.2, 15.5, 17.8},
        {19.8, 20.5, 17.8, 20.2, 22.8, 21.8, 25.2, 19.5, 23.2, 26.5, 28.8, 19.2, 15.8, 12.8, 7.5, 10.2, 3.5, 0, 8.5, 10.8, 8.2, 12.5, 15.2, 18.5, 20.8},
        {12.5, 11.8, 8.5, 11.5, 14.8, 14.5, 18.2, 12.8, 16.5, 19.8, 22.2, 13.5, 9.8, 6.8, 3.8, 8.5, 5.2, 8.5, 0, 4.2, 5.5, 5.8, 8.2, 11.5, 13.8},
        {10.8, 9.5, 6.2, 9.2, 12.5, 12.2, 15.8, 10.5, 14.2, 17.5, 19.8, 11.2, 7.5, 4.5, 6.8, 11.5, 7.8, 10.8, 4.2, 0, 3.5, 4.5, 6.8, 10.2, 12.5},
        {13.2, 12.8, 9.5, 12.5, 15.8, 15.5, 19.2, 13.8, 17.5, 20.8, 23.2, 14.5, 10.8, 7.8, 8.5, 13.2, 6.5, 8.2, 5.5, 3.5, 0, 6.8, 9.2, 12.5, 14.8},
        {9.5, 8.2, 5.8, 8.8, 11.2, 11.8, 15.5, 10.2, 14.8, 18.2, 20.5, 12.8, 8.5, 5.2, 8.2, 13.5, 9.8, 12.5, 5.8, 4.5, 6.8, 0, 3.5, 6.8, 9.2},
        {11.8, 10.5, 8.2, 8.5, 9.5, 12.5, 15.2, 12.5, 16.5, 19.8, 19.2, 14.5, 10.8, 7.5, 10.5, 15.8, 12.2, 15.2, 8.2, 6.8, 9.2, 3.5, 0, 5.5, 7.8},
        {15.2, 13.8, 11.5, 9.2, 7.8, 13.8, 12.5, 15.8, 19.8, 23.2, 18.5, 17.8, 14.2, 10.8, 13.8, 19.2, 15.5, 18.5, 11.5, 10.2, 12.5, 6.8, 5.5, 0, 4.2},
        {17.5, 16.2, 13.8, 11.5, 8.2, 16.2, 10.8, 18.2, 22.2, 25.5, 20.8, 20.2, 16.5, 13.2, 16.2, 21.5, 17.8, 20.8, 13.8, 12.5, 14.8, 9.2, 7.8, 4.2, 0}
    };
    
    int location_count = 25;
    int start_idx = -1, end_idx = -1;
    char start_name[30], end_name[30];
    int age_type;
    int transfer;
    float travel_distance;
    int base_fare;
    int total_fare;
    
    printf("========================================\n");
    printf("  서울시 버스 요금 계산 프로그램\n");
    printf("========================================\n\n");
    
    // 사용 가능한 지역 목록 출력
    printf("[ 서울시 25개 자치구 목록 ]\n");
    printf("----------------------------------------\n");
    for (int i = 0; i < location_count; i++) {
        printf("%-12s", locations[i].name);
        if ((i+1) % 5 == 0) printf("\n");
    }
    printf("\n----------------------------------------\n\n");
    
    // 출발지 입력
    printf("출발지를 입력하세요 (예: 은평구): ");
    scanf("%s", start_name);
    
    // 도착지 입력
    printf("도착지를 입력하세요 (예: 종로구): ");
    scanf("%s", end_name);
    
    // 입력한 지역명 찾기
    for (int i = 0; i < location_count; i++) {
        if (strcmp(locations[i].name, start_name) == 0) {
            start_idx = i;
        }
        if (strcmp(locations[i].name, end_name) == 0) {
            end_idx = i;
        }
    }
    
    // 지역 유효성 검사
    if (start_idx == -1) {
        printf("\n오류: '%s'는 등록되지 않은 지역입니다.\n", start_name);
        return 1;
    }
    if (end_idx == -1) {
        printf("\n오류: '%s'는 등록되지 않은 지역입니다.\n", end_name);
        return 1;
    }
    
    if (start_idx == end_idx) {
        printf("\n출발지와 도착지가 같습니다. 이동이 필요하지 않습니다.\n");
        return 0;
    }
    
    // 거리 계산
    travel_distance = distance[start_idx][end_idx];
    
    printf("\n----------------------------------------\n");
    printf("이동 거리: %.1f km\n", travel_distance);
    printf("----------------------------------------\n\n");
    
    // 연령대 선택
    printf("연령대를 선택하세요:\n");
    printf("1. 성인 (만 19세 이상)\n");
    printf("2. 청소년 (만 13세~18세)\n");
    printf("3. 어린이 (만 6세~12세)\n");
    printf("선택: ");
    scanf("%d", &age_type);
    
    // 환승 여부 입력
    printf("\n환승 하셨나요? (1: 예, 0: 아니오): ");
    scanf("%d", &transfer);
    
    // 기본 요금 설정 (10km 기준)
    if (age_type == 1) {
        base_fare = 1550;  // 성인
    } else if (age_type == 2) {
        base_fare = 900;  // 청소년
    } else if (age_type == 3) {
        base_fare = 550;   // 어린이
    } else {
        printf("\n잘못된 입력입니다.\n");
        return 1;
    }
    
    total_fare = base_fare;
    
    // 거리 추가 요금 계산 (10km 초과시 5km당 100원 추가)
    if (travel_distance > 10) {
        int extra_distance = (int)(travel_distance - 10);
        int extra_sections = (extra_distance + 4) / 5;  // 5km 단위로 올림
        total_fare += extra_sections * 100;
    }
    
    // 환승 할인 (환승시 기본요금만 부과, 추가 요금 면제)
    if (transfer == 1) {
        printf("\n✓ 환승 할인이 적용되었습니다!\n");
        total_fare = base_fare;
    }
    
    // 최종 결과 출력
    printf("\n========================================\n");
    printf("        요금 계산 결과\n");
    printf("========================================\n");
    printf("출발지     : %s\n", start_name);
    printf("도착지     : %s\n", end_name);
    printf("이동 거리  : %.1f km\n", travel_distance);
    printf("연령대     : ");
    if (age_type == 1) printf("성인\n");
    else if (age_type == 2) printf("청소년\n");
    else printf("어린이\n");
    printf("환승 여부  : %s\n", transfer ? "예" : "아니오");
    printf("----------------------------------------\n");
    printf("총 요금    : %d원\n", total_fare);
    printf("========================================\n");
    printf("\n※ 거리는 Google Maps 기준 도로 이동 거리의 근사값입니다.\n");
    
    return 0;
}
